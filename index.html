<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Fondo marino · Andrea Lértora</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate, max-age=0" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    html, body {
      height: 100%;
      overflow: hidden;
      background:
        radial-gradient(circle at 10% 0%, #3f7f82 0%, #0b3a3e 35%, #020e10 80%),
        linear-gradient(to bottom, #083234, #020b0d);
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      color: #e5f3ff;
    }

    .sea-container {
      position: relative;
      width: 100vw;
      height: 100vh;
      opacity: 0;
      transform: translateY(8px);
      transition: opacity .7s ease-out, transform .7s ease-out;
    }
    .sea-container.visible {
      opacity: 1;
      transform: translateY(0);
    }

    /* ALGA BASE */
    .alga {
      position: absolute;
      pointer-events: none;
      object-fit: cover;
      transform-origin: 50% 100%;
      transform: translateZ(0);
    }
    .alga-bg { z-index: 0; }
    .alga-fg {
      z-index: 1;
      filter: saturate(.95);
      animation: corrientePuppet 12s ease-in-out infinite;
    }

    @keyframes corrientePuppet {
      0%   { transform: translateY(0) rotate(0deg) skewX(0deg); }
      25%  { transform: translateY(-6px) rotate(.4deg) skewX(1.2deg); }
      50%  { transform: translateY(-10px) rotate(.9deg) skewX(2.4deg); }
      75%  { transform: translateY(-5px) rotate(.3deg) skewX(1.0deg); }
      100% { transform: translateY(0) rotate(0deg) skewX(0deg); }
    }

    /* BLOQUE CENTRAL — TÍTULO Y BOTONES */
    .center-block {
      position: absolute;
      left: 8vw;
      top: 12vh;
      transform: translateY(30px);
      opacity: 0;
      z-index: 2;
      transition: opacity .8s ease-out .1s, transform .8s ease-out .1s;
    }
    .sea-container.visible .center-block {
      opacity: 1;
      transform: translateY(0);
    }

    .name {
      display: inline-flex;
      gap: 0.25em;
      font-size: clamp(2.4rem, 4vw, 3.3rem);
      text-transform: uppercase;
      letter-spacing: .32em;
      margin-bottom: .2rem;
      color: #f9fafb;
      text-shadow: 0 1px 0 rgba(0,0,0,.7), 0 18px 40px rgba(0,0,0,.9);
    }
    .name span { display: inline-block; }

    .subtitle {
      font-size: .85rem;
      letter-spacing: .24em;
      color: #a5f3fc;
      margin-bottom: .8rem;
      text-transform: uppercase;
    }

    .nav {
      display: flex;
      flex-direction: column;
      gap: .35rem;
    }

    .nav-button {
      width: 177px;
      padding: .20rem .75rem;
      border: none;
      border-radius: 3px;
      background-color: rgba(80,200,190,.35);
      mix-blend-mode: multiply;
      color: #e5f3ff;
      font-size: .7rem;
      letter-spacing: .18em;
      text-transform: uppercase;
      display: flex;
      align-items: center;
      cursor: pointer;

      box-shadow:
        0 2px 4px rgba(0,0,0,.35),
        0 0 0 1px rgba(15,23,42,.45);

      transition: background-color .18s, transform .13s,
                  box-shadow .18s, letter-spacing .13s;
    }

    .nav-button:hover {
      background-color: rgba(94,234,212,.42);
      transform: translateX(2px);
      letter-spacing: .20em;
      box-shadow: 0 6px 14px rgba(0,0,0,.55),
                  0 0 0 1px rgba(15,23,42,.65);
    }

    .nav-button:active {
      background-color: rgba(45,164,150,.52);
      transform: translateY(1px) scale(.99);
      box-shadow: 0 1px 3px rgba(0,0,0,.6),
                  0 0 0 1px rgba(15,23,42,.9);
    }

    /* PARTÍCULAS */
    .particles {
      position: absolute;
      inset: 0;
      z-index: 3;
      pointer-events: none;
    }

    .particle {
      position: absolute;
      mix-blend-mode: multiply;
      opacity: 0.30;
      animation: particleCurrent ease-in-out infinite alternate;
    }

    @keyframes particleCurrent {
      0%   { transform: translate3d(0,0,0); }
      50%  { transform: translate3d(var(--driftX), var(--ampY), 0); }
      100% { transform: translate3d(0,0,0); }
    }

    .overlay {
      position: absolute;
      inset: 0;
      z-index: 4;
      pointer-events: none;
      background:
        radial-gradient(circle at 50% 15%, rgba(255,255,220,.08), transparent),
        linear-gradient(to bottom, rgba(10,35,45,.50), rgba(0,0,0,.75));
      mix-blend-mode: soft-light;
    }

    .grain {
      position: absolute;
      inset: 0;
      z-index: 5;
      opacity: .16;
      mix-blend-mode: soft-light;
      pointer-events: none;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 160 160' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.9'/%3E%3C/svg%3E");
    }

    @media (max-width: 768px) {
      .center-block {
        left: 6vw;
        top: 10vh;
      }
      .name {
        font-size: clamp(2rem, 6vw, 2.6rem);
        letter-spacing: 0.26em;
        flex-direction: column;
        gap: 0.05em;
      }
      .subtitle {
        font-size: 0.8rem;
        letter-spacing: 0.20em;
        margin-bottom: 0.7rem;
      }
      .nav-button {
        width: 177px;
        padding: 0.22rem 0.75rem;
      }
    }
  </style>
</head>

<body>
  <div class="sea-container" id="sea-container">

    <div class="center-block">
      <div class="name">
        <span class="first">Andrea</span>
        <span class="last">Lértora</span>
      </div>
      <div class="subtitle">artista plástica</div>

      <nav class="nav">
        <button class="nav-button">Bio</button>
        <button class="nav-button">Porta</button>
        <button class="nav-button">Cont</button>
        <button class="nav-button">Fun</button>
      </nav>
    </div>

    <div class="particles" id="particles-layer"></div>
    <div class="overlay"></div>
    <div class="grain"></div>
  </div>

  <script>
    const algaeSources = [
      "algas/algas 1.png","algas/algas 2.png","algas/algas 3.png",
      "algas/algas 4.png","algas/algas 5.png"
    ];

    const container = document.getElementById("sea-container");
    const particlesContainer = document.getElementById("particles-layer");
    let bgImages = [], fgImages = [];
    let bgReady = false, fgReady = false, revealed = false;

    const random = (a,b) => a + Math.random()*(b-a);

    function getVH() {
      return window.innerHeight || document.documentElement.clientHeight || screen.height;
    }
    function getVW() {
      return window.innerWidth || document.documentElement.clientWidth || screen.width;
    }

    function tryReveal() {
      if (bgReady && fgReady && !revealed) {
        revealed = true;
        container.classList.add("visible");
      }
    }

    function createSea() {
      container.querySelectorAll("img.alga").forEach(e => e.remove());
      bgImages = [];
      fgImages = [];
      bgReady = fgReady = revealed = false;
      container.classList.remove("visible");
      loadBG();
      loadFG();
    }

    /* ---------- FONDO: PNG entero en la altura de la pantalla ---------- */
    function loadBG() {
      const count = Math.floor(random(10,18));
      let done = 0;

      for (let i = 0; i < count; i++) {
        const img = document.createElement("img");
        img.className = "alga alga-bg";
        img.src = algaeSources[Math.floor(Math.random()*algaeSources.length)];
        img.style.opacity = random(.22,.40);
        img.style.filter  = `blur(${random(1.2,3.2)}px) saturate(.8)`;
        if (Math.random() < .5) img.style.transform = "scaleX(-1)";
        img.onload = () => { done++; if (done === count) layoutBG(); };
        bgImages.push(img);
        container.insertBefore(img, container.firstChild);
      }
    }

    function layoutBG() {
      if (!bgImages.length) return;

      const vh = getVH();
      const vw = getVW();

      const totalHeight = vh;  // ajusta a la altura de pantalla
      const topOffset   = 0;

      let currentX = random(vw * 0.05, vw * 0.10);

      bgImages.forEach(img => {
        const ratio = img.naturalWidth / img.naturalHeight || 0.4;
        let width   = totalHeight * ratio;
        const maxWidth = vw * 0.35;
        if (width > maxWidth) width = maxWidth;

        if (currentX + width > vw - vw * 0.05) {
          img.remove();
          return;
        }

        img.style.height = totalHeight + "px";
        img.style.width  = width + "px";
        img.style.top    = topOffset + "px";
        img.style.left   = currentX + "px";

        currentX += width + random(vw * 0.10, vw * 0.20);
      });

      bgReady = true;
      tryReveal();
    }

    /* ---------- FRENTE ---------- */
    function loadFG() {
      const count = Math.floor(random(7,12));
      let done = 0;

      for (let i = 0; i < count; i++) {
        const img = document.createElement("img");
        img.className = "alga alga-fg";
        img.src = algaeSources[Math.floor(Math.random()*algaeSources.length)];
        img.style.opacity = random(.50,.78);
        if (Math.random() < .5) img.style.transform = "scaleX(-1)";
        img.onload = () => { done++; if (done === count) layoutFG(); };
        fgImages.push(img);
        container.insertBefore(img, container.querySelector(".overlay"));
      }
    }

    function layoutFG() {
      if (!fgImages.length) return;

      const vh = getVH();
      const vw = getVW();

      const totalHeight   = vh;
      const topOffset     = 0;
      const segments      = fgImages.length - 1 || 1;
      const segmentWidth  = vw / segments;

      fgImages.forEach((img, i) => {
        const ratio = img.naturalWidth / img.naturalHeight || 0.4;
        const width = totalHeight * ratio * 1.05;

        const center = i * segmentWidth + random(-segmentWidth * 0.15, segmentWidth * 0.15);
        const left   = center - width / 2;

        img.style.height = totalHeight + "px";
        img.style.width  = width + "px";
        img.style.top    = topOffset + "px";
        img.style.left   = left + "px";
      });

      fgReady = true;
      tryReveal();
    }

    /* ---------- PARTÍCULAS ORGÁNICAS ---------- */
    function createParticles() {
  particlesContainer.innerHTML = "";

  const palette = [
    "rgba(200,230,240,0.40)",
    "rgba(180,210,220,0.38)",
    "rgba(160,200,210,0.34)",
    "rgba(140,180,190,0.32)"
  ];

  const totalParticles = 150;
  
  for (let i = 0; i < totalParticles; i++) {
    const p = document.createElement("div");
    p.className = "particle";

    // Formas orgánicas: ancho y alto distintos
    const w = random(2, 10);
    const h = random(2, 10);
    p.style.width  = w + "px";
    p.style.height = h + "px";

    // Bordes irregulares
    const r1 = random(40, 90);
    const r2 = random(40, 90);
    const r3 = random(40, 90);
    const r4 = random(40, 90);
    p.style.borderRadius = `${r1}% ${r2}% ${r3}% ${r4}%`;

    // Color
    p.style.background = palette[Math.floor(Math.random() * palette.length)];

    // ---- BLUR ----
    // 10% sin blur
    if (Math.random() > 0.10) {  
      p.style.filter = `blur(${random(0.5, 3)}px)`; 
    }

    // Posición inicial
    p.style.left = random(0, 100) + "vw";
    p.style.top  = random(0, 100) + "vh";

    // Movimiento de corriente
    p.style.setProperty("--driftX", random(3, 10) + "vw");
    p.style.setProperty("--ampY",  random(-8, 8) + "px");

    p.style.animationDuration = random(14, 30) + "s";
    p.style.animationDelay    = random(-25, 0) + "s";

    particlesContainer.appendChild(p);
  }
}

    window.addEventListener("DOMContentLoaded", () => {
      createSea();
      createParticles();
    });

    window.addEventListener("resize", () => {
      layoutBG();
      layoutFG();
      createParticles();
    });

    window.addEventListener("orientationchange", () => {
      setTimeout(() => {
        layoutBG();
        layoutFG();
        createParticles();
      }, 300);
    });
  </script>
</body>
</html>
