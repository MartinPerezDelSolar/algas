<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Portafolio – Andrea Lértora</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    /* ----- RESET BÁSICO ----- */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      height: 100%;
      scroll-behavior: smooth;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Helvetica Neue", Arial, sans-serif;
      background: radial-gradient(circle at top, #111827 0%, #020617 40%, #000 100%);
      color: #e5e7eb;
      overflow-x: hidden;
    }

    /* ----- MARCO GENERAL ----- */
    .page {
      min-height: 100vh;
      position: relative;
    }

    header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 100;
      padding: 1.2rem 5vw;
      display: flex;
      justify-content: space-between;
      align-items: center;
      pointer-events: none;
    }

    header .brand,
    header .subtitle {
      pointer-events: auto;
    }

    .brand {
      font-size: 0.95rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: #9ca3af;
    }

    .subtitle {
      font-size: 0.85rem;
      color: #6b7280;
    }

    main {
      position: relative;
      padding-top: 4.5rem; /* espacio bajo el header fijo */
    }

    /* ----- PANELES TIPO “APPLE” ----- */
    .panel {
      position: relative;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0 5vw;
      /* superposición suave entre paneles */
      margin-top: -20vh;
      z-index: 1;
    }

    .panel:first-of-type {
      margin-top: 0;
    }

    .panel-inner {
      position: relative;
      width: min(100%, 1200px);
      border-radius: 24px;
      overflow: hidden;
      box-shadow:
        0 30px 80px rgba(0, 0, 0, 0.75),
        0 0 0 1px rgba(148, 163, 184, 0.12);
      transform-origin: center;
      background: #020617;
    }

    .portfolio-image {
      display: block;
      width: 100%;
      height: auto;
      vertical-align: middle;
      will-change: transform, filter, opacity;
      transform-origin: center;
    }

    .gradient-overlay {
      position: absolute;
      inset: 0;
      pointer-events: none;
      background:
        radial-gradient(circle at top, rgba(148, 163, 255, 0.30), transparent 55%),
        linear-gradient(to bottom, rgba(15, 23, 42, 0.85), transparent 30%, rgba(15, 23, 42, 0.9));
      mix-blend-mode: soft-light;
      opacity: 0;
      transition: opacity 0.4s ease-out;
    }

    /* Pequeño indicador en esquina (opcional) */
    .panel-label {
      position: absolute;
      bottom: 1rem;
      left: 1.5rem;
      font-size: 0.75rem;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: rgba(209, 213, 219, 0.7);
      text-shadow: 0 0 12px rgba(0, 0, 0, 0.9);
    }

    /* FONDO CON “BRILLOS” */
    .glow {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: -1;
      background:
        radial-gradient(circle at 10% 20%, rgba(59, 130, 246, 0.12), transparent 50%),
        radial-gradient(circle at 80% 0%, rgba(244, 114, 182, 0.10), transparent 55%),
        radial-gradient(circle at 90% 80%, rgba(45, 212, 191, 0.10), transparent 60%);
      opacity: 0.9;
    }

    /* TEXTO FINAL */
    .end-section {
      height: 80vh;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 0 5vw 8vh;
    }

    .end-section p {
      max-width: 480px;
      font-size: 0.9rem;
      color: #9ca3af;
      line-height: 1.6;
    }

    /* RESPONSIVE */
    @media (max-width: 768px) {
      header {
        padding: 0.9rem 1.4rem;
      }

      .panel {
        padding: 0 1.4rem;
        margin-top: -16vh;
      }

      .panel-inner {
        border-radius: 18px;
      }

      .panel-label {
        font-size: 0.65rem;
        left: 1.1rem;
        bottom: 0.85rem;
      }

      .subtitle {
        display: none;
      }
    }
  </style>
</head>
<body>
  <div class="page">
    <div class="glow"></div>

    <header>
      <div class="brand">Andrea Lértora</div>
      <div class="subtitle">Portafolio visual</div>
    </header>

    <main id="gallery">
      <!-- Los paneles se generan automáticamente con JavaScript -->
    </main>

    <section class="end-section">
      <p>
        Desliza de nuevo hacia arriba para volver a recorrer la secuencia.  
        Puedes seguir agregando imágenes en la carpeta <strong>imagenes</strong>:
        <code>imagen1.jpg, imagen2.jpg, imagen3.jpg…</code>
      </p>
    </section>
  </div>

  <script>
    // ==========================
    // CONFIGURACIÓN BÁSICA
    // ==========================

    // Número máximo de imágenes que el código va a buscar.
    // Puedes aumentar este número si quieres más.
    const MAX_IMAGES = 40;

    // Carpeta donde están las imágenes
    const IMAGE_FOLDER = "imagenes";

    // Prefijo y extensión esperados
    const IMAGE_PREFIX = "imagen";
    const IMAGE_EXT = ".jpg";

    // ==========================
    // CREAR PANELES DINÁMICAMENTE
    // ==========================

    function createPanels() {
      const gallery = document.getElementById("gallery");

      for (let i = 1; i <= MAX_IMAGES; i++) {
        const section = document.createElement("section");
        section.className = "panel";
        section.style.display = "none"; // se mostrará solo si la imagen carga bien

        const inner = document.createElement("div");
        inner.className = "panel-inner";

        const img = document.createElement("img");
        img.className = "portfolio-image";
        img.src = `${IMAGE_FOLDER}/${IMAGE_PREFIX}${i}${IMAGE_EXT}`;
        img.alt = `Imagen ${i} del portafolio`;

        const overlay = document.createElement("div");
        overlay.className = "gradient-overlay";

        const label = document.createElement("div");
        label.className = "panel-label";
        label.textContent = `Serie · ${i.toString().padStart(2, "0")}`;

        // Si la imagen carga, mostramos el panel
        img.addEventListener("load", () => {
          section.style.display = "flex";
        });

        // Si hay error (por ejemplo, no existe imagenX.jpg), quitamos el panel
        img.addEventListener("error", () => {
          section.remove();
        });

        inner.appendChild(img);
        inner.appendChild(overlay);
        inner.appendChild(label);
        section.appendChild(inner);
        gallery.appendChild(section);
      }
    }

    // ==========================
    // ANIMACIÓN EN SCROLL
    // ==========================

    function setupScrollEffects() {
      const panels = Array.from(document.querySelectorAll(".panel"));

      let ticking = false;

      function onScroll() {
        if (!ticking) {
          window.requestAnimationFrame(() => {
            updatePanels();
            ticking = false;
          });
          ticking = true;
        }
      }

      function updatePanels() {
        const viewportHeight = window.innerHeight || document.documentElement.clientHeight;

        panels.forEach((panel, index) => {
          const inner = panel.querySelector(".panel-inner");
          const img = panel.querySelector(".portfolio-image");
          const overlay = panel.querySelector(".gradient-overlay");

          const rect = panel.getBoundingClientRect();
          const panelCenter = rect.top + rect.height / 2;
          const viewportCenter = viewportHeight / 2;

          // offset normalizado -1 … 1
          const offset = (panelCenter - viewportCenter) / viewportHeight;
          const dist = Math.min(Math.abs(offset) * 1.4, 1);

          // Escala: más grande cuando está cerca del centro
          const scale = 1.05 + (1 - dist) * 0.15;

          // Desplazamiento vertical para efecto parallax
          const translateY = offset * -40; // px (se mueve en dirección opuesta al scroll)

          // Opacidad: se desvanece suavemente al alejarse
          const opacity = 1 - dist * 0.35;

          // Blur progresivo
          const blur = dist * 10; // px

          // Ligerísima rotación alternada para dar dinamismo
          const direction = index % 2 === 0 ? 1 : -1;
          const rotate = (1 - dist) * 1.2 * direction; // grados, pequeño

          inner.style.transform =
            `translateY(${translateY}px) scale(${scale}) rotate(${rotate}deg)`;
          inner.style.opacity = opacity.toFixed(3);

          img.style.filter = `blur(${blur.toFixed(1)}px) saturate(${1 + (1 - dist) * 0.25})`;

          // Gradiente más intenso cuando la imagen está cerca del centro
          const overlayOpacity = 0.15 + (1 - dist) * 0.45;
          overlay.style.opacity = overlayOpacity.toFixed(3);

          // Z-index para que la imagen más cercana “suba” sobre las demás
          const zBase = 10;
          const zBoost = Math.round((1 - dist) * 10);
          panel.style.zIndex = zBase + zBoost;
        });
      }

      window.addEventListener("scroll", onScroll, { passive: true });
      window.addEventListener("resize", () => {
        // Recalcular posiciones al cambiar el tamaño
        updatePanels();
      });

      // Llamada inicial
      updatePanels();
    }

    // ==========================
    // INICIALIZACIÓN
    // ==========================

    document.addEventListener("DOMContentLoaded", () => {
      createPanels();
      // Esperar un pequeño tiempo para que algunas imágenes carguen
      setTimeout(setupScrollEffects, 300);
    });
  </script>
</body>
</html>
